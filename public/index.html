<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Webhook Listener</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîó Webhook Listener</h1>
            <p>Capture e monitore webhooks em tempo real - Multi-usu√°rio</p>
            <div class="cleanup-notice" id="cleanupNotice">
                <div class="notice-icon">üóëÔ∏è</div>
                <div class="notice-content">
                    <strong>Limpeza autom√°tica:</strong> Dados s√£o removidos automaticamente ap√≥s 60 dias para manter o sistema otimizado.
                    <div class="last-cleanup" id="lastCleanup"></div>
                </div>
            </div>
        </div>

        <div class="endpoint-section">
            <h3>Criar Novo Endpoint</h3>
            <div class="endpoint-form">
                <input 
                    type="text" 
                    class="endpoint-input" 
                    id="endpointName" 
                    placeholder="Nome do seu endpoint (ex: meu-app-payment)"
                    maxlength="50"
                >
                <button class="create-btn" id="createBtn" onclick="createEndpoint()">Criar Endpoint</button>
                <button class="clear-btn" id="newEndpointBtn" onclick="clearEndpointAndCreateNew()" style="display: none;">Novo Endpoint</button>
            </div>
            
            <div class="error-message" id="errorMessage"></div>
            <div class="success-message" id="successMessage"></div>
            
            <div class="endpoint-url" id="endpointUrlContainer">
                <code id="endpointUrl"></code>
                <button class="copy-btn" onclick="copyEndpointUrl()">Copiar</button>
            </div>
            
            <div class="endpoint-info" id="endpointInfo">
                <div class="endpoint-name" id="endpointName"></div>
                <div class="endpoint-created" id="endpointCreated"></div>
            </div>
        </div>

        <div class="controls" id="controlsSection" style="display: none;">
            <div class="status">
                <div class="status-dot" id="statusDot"></div>
                <span id="statusText">Desconectado</span>
                <span class="request-count" id="requestCount">0 requests</span>
            </div>
            <button class="clear-btn" id="clearBtn" onclick="clearRequests()" disabled>Limpar Requests</button>
        </div>

        <div class="requests-container" id="requestsContainer" style="display: none;">
            <div id="requestsList">
                <div class="no-endpoint">
                    <h3>Nenhum endpoint ativo</h3>
                    <p>Crie um endpoint acima para come√ßar a receber webhooks</p>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>